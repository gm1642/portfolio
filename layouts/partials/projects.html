<h1>My Projects</h1>
<div class="projects-container">
  <!-- Project 1 -->
  <div class="project" id="live-object-detection" data-type="video">
    <div class="carousel">
      <img src="/images/projects/profile.png" alt="Project Image">
      <video controls>
        <source src="/videos/project1-demo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
    <div class="project-title">Live Object Detection</div>
    <div class="project-description">
      Deployed real-time object detection on Nvidia Jetson Nano.
    </div>
  </div>

  <!-- Project 2 -->
  <div class="project" id="exam-chatbot-assistant" data-type="images">
    <div class="carousel">
      <img src="/images/projects/profile2.png" alt="Project Image 1">
      <img src="/images/projects/extra1.png" alt="Project Image 2">
      <img src="/images/projects/extra2.png" alt="Project Image 3">
    </div>
    <div class="project-title">Exam Chatbot Assistant</div>
    <div class="project-description">
      Building an information retrieval-based chatbot (RAG) for GATE exam prep.
    </div>
  </div>

  <!-- Project 3 -->
  <div class="project" id="otp-smart-lock" data-type="images">
    <div class="carousel">
      <img src="/images/projects/convertor.jpeg" alt="Project Image 1">
      <!-- <img src="/images/projects/extra3.png" alt="Project Image 2">
      <img src="/images/projects/extra4.png" alt="Project Image 3"> -->
    </div>
    <div class="project-title">OTP-Based Smart Lock</div>
    <div class="project-description">
      Secure authentication with fingerprint recognition and OTP generation.
    </div>
  </div>
</div>

<script>
  document.querySelectorAll('.project').forEach((project) => {
    const carousel = project.querySelector('.carousel');
    const items = carousel.children;
    let currentIndex = 0;

    // Initialize by showing only the first item
    items[currentIndex].classList.add('active');

    function showNextItem() {
      items[currentIndex].classList.remove('active');
      currentIndex = (currentIndex + 1) % items.length; // Loop to the next item
      items[currentIndex].classList.add('active');
    }

    // Determine sliding interval based on the project type
    const intervalTime =
      project.getAttribute('data-type') === 'video' ? 10000 : 3000; // 10s for video, 3s for images

    // Set interval for carousel sliding
    setInterval(() => {
      // Only auto-slide images or non-playing videos
      if (
        items[currentIndex].tagName !== 'VIDEO' ||
        (items[currentIndex].tagName === 'VIDEO' && items[currentIndex].paused)
      ) {
        showNextItem();
      }
    }, intervalTime);
  });

  // Use IntersectionObserver to play videos when visible
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        const video = entry.target;
        if (entry.isIntersecting) {
          video.play(); // Play video when it becomes visible
        } else {
          video.pause(); // Pause video when it goes out of view
        }
      });
    },
    { threshold: 0.5 } // Video must be at least 50% visible to start playing
  );

  // Observe all videos
  document.querySelectorAll('video').forEach((video) => {
    observer.observe(video);
  });
</script>
